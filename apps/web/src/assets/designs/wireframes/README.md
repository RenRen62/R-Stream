# ワイヤーフレーム設計書

## 画面レイアウト概要

### スピーカー画面（通常モード）

```
+------------------------------------------+
|              ヘッダー                     |
|  [タイトル] [参加者数] [設定] [現在時刻]  |
+------------------------------------------+
|                                          |
|              理解度グラフ                 |
|  [時間軸] [理解度] [参加者一覧]           |
|  [現在時刻マーカー]                       |
|                                          |
+------------------------------------------+
|              質問表示エリア               |
|  [質問1] [質問2] [質問3] ...             |
+------------------------------------------+
```

### スピーカー画面（PiPモード）

```
+------------------------------------------+
|              ヘッダー                     |
|  [タイトル] [参加者数] [設定] [現在時刻]  |
+------------------------------------------+
|                                          |
|                                          |
|              メイン画面                   |
|        （会議/資料共有画面）              |
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
+------------------------------------------+
|                                          |
|  +------------------+                    |
|  |    理解度グラフ  |                    |
|  |  [時間軸]        |                    |
|  |  [理解度]        |                    |
|  |  [参加者一覧]    |                    |
|  +------------------+                    |
|                                          |
+------------------------------------------+
|              質問表示エリア               |
|  [質問1] [質問2] [質問3] ...             |
+------------------------------------------+
```

### スピーカー画面（PiPモード - 小画面詳細）

```
+------------------+
|    理解度グラフ  |
|  +------------+  |
|  |            |  |
|  |   グラフ   |  |
|  |            |  |
|  +------------+  |
|  [現在値: 75%]   |
|  [平均: 68%]     |
|  [直近1分]       |
+------------------+
```

### 小画面表示の詳細仕様

1. グラフ表示

   - 縦軸: 理解度（0-100%）
   - 横軸: 時間（直近1分）
   - 現在値: 太線で強調
   - 平均値: 点線で表示
   - 凡例: 最小限の情報のみ表示

2. インタラクション

   - タッチ操作
     - ピンチイン/アウト: 拡大/縮小
     - スワイプ: 時間軸スクロール
     - タップ: 詳細情報表示
   - ホバー効果
     - データポイントの強調
     - ツールチップ表示

3. レスポンシブ対応
   - 画面サイズに応じた自動調整
   - 重要な情報の優先表示
   - フォントサイズの自動調整

### リスナー画面（通常モード）

```
+------------------------------------------+
|              ヘッダー                     |
|  [ID入力] [公開/匿名切替] [現在時刻]      |
+------------------------------------------+
|                                          |
|              理解度表示                   |
|  [○] ナチュラル（レベル3）               |
|                                          |
|  キー操作:                                |
|  ← キー: 理解度低下（押下中: レベル2→1）  |
|  → キー: 理解度上昇（押下中: レベル4→5）  |
|  Q キー: 質問モード開始                   |
|                                          |
+------------------------------------------+
|              質問機能                     |
|  [質問をしたい] または Q キーを押してください |
+------------------------------------------+
```

### 質問入力フォーム

```
+------------------------------------------+
|              質問入力                     |
|  +----------------------------------+    |
|  |                                  |    |
|  |          質問文を入力            |    |
|  |        （最大200文字）           |    |
|  |                                  |    |
|  +----------------------------------+    |
|                                          |
|  [キャンセル]        [送信]              |
|  (Escキー)          (Enterキー)         |
+------------------------------------------+
```

### 質問表示の仕様

1. 入力方法

   - キーボード操作
     - Qキー: 質問モード開始
     - Enterキー: 質問送信
     - Escキー: モード終了
   - 画面操作
     - 「質問をしたい」ボタン: 質問モード開始
     - 「送信」ボタン: 質問送信
     - 「キャンセル」ボタン: モード終了

2. 質問フォーム

   - テキスト入力エリア
     - 最大200文字
     - プレースホルダーテキスト表示
     - 文字数カウンター表示
   - 操作ボタン
     - 送信ボタン（Enterキー）
     - キャンセルボタン（Escキー）

3. 質問の表示

   - スピーカー画面
     - 質問文
     - 質問者ID（匿名設定時は「匿名」）
     - 受信時刻
   - リスナー画面
     - 送信完了メッセージ
     - 質問履歴表示（オプション）

### リスナー画面（PiPモード）

```
+------------------------------------------+
|              ヘッダー                     |
|  [ID入力] [公開/匿名切替] [現在時刻]      |
+------------------------------------------+
|                                          |
|                                          |
|              メイン画面                   |
|        （会議/資料共有画面）              |
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
+------------------------------------------+
|                                          |
|  +------------------+                    |
|  |  理解度ボタン    |                    |
|  |  [理解度表示]    |                    |
|  |  [質問ボタン]    |                    |
|  +------------------+                    |
|                                          |
+------------------------------------------+
```

### 理解度表示の仕様

1. キーボード操作

   - デフォルト状態（キー未押下）
     - 表示: 「○」（黄色）
     - 意味: ナチュラル、ノーリアクション、ノーコメント
     - グラフ表示: 黄色の実線
     - 値: レベル3（普通）
   - 左矢印キー（←）押下中
     - 1回押下: レベル2（やや理解できていない）
       - 表示: 「△」（オレンジ色）
     - 2回押下: レベル1（理解できていない）
       - 表示: 「×」（赤色）
   - 右矢印キー（→）押下中
     - 1回押下: レベル4（やや理解できた）
       - 表示: 「◎」（薄緑）
     - 2回押下: レベル5（理解できた）
       - 表示: 「☆」（緑色）

2. グラフ表示

   - デフォルト状態: 黄色の実線（レベル3）
   - 左矢印キー押下中: オレンジ色→赤色の実線（レベル2→1）
   - 右矢印キー押下中: 薄緑→緑色の実線（レベル4→5）

3. インタラクション

   - キーを離すと自動的にレベル3（ナチュラル）に戻る
   - 押下時間に応じてレベルが変化
   - 画面には現在の理解度レベルを表示
   - キー操作の説明を画面に常時表示
   - キー設定はカスタマイズ可能

### 理解度警告表示の例

1. レベル1警告（理解度30%未満）

```
+------------------------------------------+
|  ╔════════════════════════════════════╗  |
|  ║              ヘッダー               ║  |
|  ║  [タイトル] [参加者数] [設定]       ║  |
|  ╚════════════════════════════════════╝  |
|                                          |
|              理解度グラフ                 |
|  [時間軸] [理解度] [参加者一覧]           |
|  [現在時刻マーカー]                       |
|                                          |
+------------------------------------------+
```

2. レベル2警告（理解度20%未満）

```
+------------------------------------------+
|  ╔════════════════════════════════════╗  |
|  ║              ヘッダー               ║  |
|  ║  [タイトル] [参加者数] [設定]       ║  |
|  ╚════════════════════════════════════╝  |
|                                          |
|              理解度グラフ                 |
|  [時間軸] [理解度] [参加者一覧]           |
|  [現在時刻マーカー]                       |
|                                          |
+------------------------------------------+
  ※ 赤フレームが点滅
```

3. レベル3警告（理解度10%未満）

```
+------------------------------------------+
|  ╔════════════════════════════════════╗  |
|  ║    ⚠️           ヘッダー           ║  |
|  ║  [タイトル] [参加者数] [設定]       ║  |
|  ╚════════════════════════════════════╝  |
|                                          |
|              理解度グラフ                 |
|  [時間軸] [理解度] [参加者一覧]           |
|  [現在時刻マーカー]                       |
|                                          |
+------------------------------------------+
  ※ 赤フレーム点滅 + 警告アイコン回転
```

### 警告表示の仕様

1. 視覚効果

   - フレームの色: #FF0000（赤）
   - フレームの太さ: 4px
   - 透明度: 30%～70%で変化
   - 点滅間隔: 1秒

2. アニメーション

   - フレームの点滅: opacity 0.3 → 0.7
   - 警告アイコン: 360度回転
   - アニメーション時間: 1秒

3. カスタマイズ
   - 警告レベルの閾値
   - アニメーション効果
   - 警告色の選択

## 画面遷移図

```
+----------------+     +----------------+
|    ログイン    | --> | スピーカー画面  |
+----------------+     +----------------+
        |                     ^
        v                     |
+----------------+     +----------------+
|   リスナー画面  | --> |    質問表示    |
+----------------+     +----------------+
        |                     ^
        v                     |
+----------------+     +----------------+
|   PiPモード    | <-> | 通常モード     |
+----------------+     +----------------+
```

## 時間同期について

- 全画面でNTPサーバー（Network Time Protocol Server）と通信
- 現在時刻をヘッダーに表示
- 理解度グラフの時間軸と現在時刻を同期
- 全参加者の画面で時間を統一

## 更新履歴

| 日付       | 更新内容 | 更新者 |
| ---------- | -------- | ------ |
| 2024-03-21 | 初版作成 | -      |

### アーカイブ一覧画面

```
+------------------------------------------+
|              ヘッダー                     |
|  [タイトル] [検索] [設定] [現在時刻]      |
+------------------------------------------+
|                                          |
|  検索条件                                |
|  [日時] [タイトル] [参加者] [タグ]        |
|                                          |
+------------------------------------------+
|  ディスカッション一覧                    |
|  +----------------------------------+    |
|  | タイトル: プロジェクト概要説明    |    |
|  | 日時: 2024-03-21 14:00-15:00     |    |
|  | 参加者: 10名                     |    |
|  | 所要時間: 60分                   |    |
|  +----------------------------------+    |
|                                          |
|  +----------------------------------+    |
|  | タイトル: 技術スタックの説明      |    |
|  | 日時: 2024-03-21 15:30-16:30     |    |
|  | 参加者: 8名                      |    |
|  | 所要時間: 60分                   |    |
|  +----------------------------------+    |
|                                          |
+------------------------------------------+
```

### アーカイブ詳細画面

```
+------------------------------------------+
|              ヘッダー                     |
|  [タイトル] [戻る] [エクスポート] [設定]  |
+------------------------------------------+
|                                          |
|  ディスカッション情報                    |
|  タイトル: プロジェクト概要説明           |
|  日時: 2024-03-21 14:00-15:00            |
|  参加者: 10名                            |
|                                          |
+------------------------------------------+
|              理解度グラフ                 |
|  [再生] [一時停止] [速度調整] [時間軸]    |
|  +----------------------------------+    |
|  |                                  |    |
|  |           グラフ表示             |    |
|  |                                  |    |
|  +----------------------------------+    |
|                                          |
+------------------------------------------+
|              質問と回答                   |
|  +----------------------------------+    |
|  | 質問者: ユーザーA                |    |
|  | 時刻: 14:15                      |    |
|  | Q: プロジェクトの規模は？        |    |
|  | A: 約3ヶ月の予定です             |    |
|  +----------------------------------+    |
|                                          |
+------------------------------------------+
|              統計情報                     |
|  平均理解度: 75%                         |
|  質問数: 5件                             |
|  理解度の変動: 中                        |
+------------------------------------------+
```

### アーカイブ機能の仕様

1. 一覧表示

   - 検索条件
     - 日時範囲
     - タイトル
     - 参加者
     - タグ
   - 表示項目
     - タイトル
     - 日時
     - 参加者数
     - 所要時間

2. 詳細表示

   - 理解度グラフ
     - 時系列再生
     - 一時停止/再開
     - 再生速度調整
   - 質問と回答
     - 時系列表示
     - 質問者情報
     - 回答内容
   - 統計情報
     - 平均理解度
     - 質問数
     - 理解度の変動

3. エクスポート

   - 出力形式
     - PDF
     - CSV
     - JSON
   - 出力内容
     - グラフ
     - 質問と回答
     - 統計情報
