# 📋 R-Stream 要件定義書

## このファイルの役割

このファイルは、R-Streamプロジェクトの要件定義書として機能します。
プロジェクトの目的、機能要件、非機能要件、制約条件などを明確に定義し、
開発チームやステークホルダーが共通の理解を持つための重要なドキュメントです。

## 📋 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [基本機能要件](#基本機能要件)
3. [画面レイアウト](#画面レイアウト)
4. [技術仕様](#技術仕様)
5. [非機能要件](#非機能要件)
6. [制約条件](#制約条件)
7. [更新履歴](#更新履歴)

## プロジェクト概要

### 目的

R-Streamは、プレゼンテーションや講義、複数人でのディスカッションなどのシチュエーションにおいて、
聴衆の理解度をリアルタイムで可視化し、スピーカーとリスナーの双方向コミュニケーションを促進するための
Webアプリケーションです。

### 主な特徴

- リアルタイム理解度表示
  > 時間軸に対する5段階での理解度グラフをリアルタイム作成、表示する
  > プレゼンター/講師/ファシリテータ/議論の発言者がリアルタイムで確認、その場でフィードバックできる
- リアルタイム賛否情報表示
  > プレゼンテーションなどの内容に対する賛否の意見情報を、時間軸に対してリアルタイム作成、表示する
  > プレゼンター/講師/ファシリテータ/議論の発言者がリアルタイムで確認、その場でフィードバックできる
- セッション録画
  > プレゼンテーション画面と理解度グラフを同時に録画
  > プレゼンターが後から見返して次回以降のプレゼン力向上に活かせる
- データ分析機能
  > 現状は理解度グラフのみだが、機能拡張した場合は分析機能の有用性の向上が見込まれる

### 対象ユーザー

- プレゼンター/講師/ファシリテータ/議論の発言者
- 聴衆/学生/議論の参加者
- セッション管理者

### 想定ユースケース

#### プレゼンター

> 社内プレゼンを不特定多数の聴衆に聞かせる際に、本アプリを使用する

#### 講師

> 塾講師が不特定多数の生徒に講義を聞かせる際に、本アプリを使用する

#### ファシリテータ

> 会議やワークショップの進行役として、参加者の理解度をリアルタイムで把握し、
> 適切なタイミングで説明の補足や質問の機会を設けるために本アプリを使用する

#### 議論の発言者

> 会議などのディスカッションの場において、以下の2つのユースケースを想定：
>
> 1. ファシリテータがグラフをチェックし、司会進行に活かす
> 2. 全員がグラフを共有し、それぞれの発言に対する理解度グラフをリアルタイム確認し、
>    理解/不理解の確認の手間を省くことでディスカッション効率を向上させる

## 基本機能要件

### 1. セッション管理

- セッションの作成と管理
- 参加者管理
- セッション設定のカスタマイズ
  > 匿名モードの有効/無効、理解度グラフの共有設定など、セッションごとの表示設定をカスタマイズ可能

#### 1.1 セッション作成モード

##### プレゼンモード

> プレゼンターが聴衆に対して一方向的に情報を発信する形式
>
> - プレゼンター：理解度グラフをリアルタイムで確認し、必要に応じて説明を調整
> - リスナー：5段階の理解度をリアルタイムで送信

##### 講義モード

> 講師が生徒に対して教育内容を伝達する形式
>
> - 講師：理解度の低いポイントを特定し、重点的に説明
> - 生徒：理解度をリアルタイムで送信し、質問機能を活用

##### 動画聴講モード

> 事前録画された動画を視聴しながら理解度を共有する形式
>
> - ファシリテータ：動画の再生制御と理解度の分析
> - 参加者：動画視聴中の理解度をリアルタイムで送信

##### ディスカッションモード

> 複数の参加者が対等な立場で議論を行う形式
>
> - ファシリテータ：議論の進行と理解度の管理
> - 参加者：発言内容に対する理解度をリアルタイムで送信

### 2. 理解度表示

- リアルタイム理解度の可視化
- 5段階評価システム
- キーボードショートカット対応

### 3. 賛否情報表示

- リアルタイム賛否の可視化
- 賛成/反対/中立の3段階評価
- 意見の集約と分析

### 4. 録画機能

- 画面録画
  > プレゼンテーション画面と理解度グラフを同時に録画
- 音声録音
  > スピーカーやリスナーの音声を録音
- 自動保存とアーカイブ
  > セッション終了時に自動保存、過去のセッションは30日間アーカイブ

### 5. データ分析

- 理解度の時系列分析
  > セッション中の理解度の推移をグラフ化、重要なポイントを自動検出
- 賛否情報の時系列分析
  > セッション中の賛否の推移をグラフ化、重要なポイントを自動検出
- レポート生成
  > セッション終了時に自動で理解度の推移の分析結果レポートを生成
  > リスナー個々の理解度及び賛否情報の推移から、プレゼンテーションに対するハイライトレポートを作成
  > ハイライトレポートはプレゼンターへの質疑応答時に、質問を簡潔に的確に実施するために使用する

## 画面レイアウト

### 初期画面

> アプリケーション起動時の最初の画面
>
> - R-Stream新規作成ボタン
> - 既存セッション参加ボタン
> - 別の人に依頼する機能

### セッション作成画面

> 新しいセッションを作成する際の画面
>
> - セッション名入力
> - モード選択（プレゼン/講義/動画聴講/ディスカッション）
> - 設定項目（匿名モード、理解度共有設定など）

### プレゼンター/ファシリテータ画面

> プレゼンターやファシリテータが使用する画面
>
> - リアルタイム理解度グラフ表示
> - 参加者リスト
> - セッション制御機能（録画開始/停止、設定変更など）
> - 理解度統計情報

### リスナー画面

> 聴衆や参加者が使用する画面
>
> - 理解度送信ボタン（1-5段階）
> - 賛否送信ボタン（賛成/反対/中立）
> - リアルタイム理解度グラフ表示（設定により表示/非表示）
> - 質問機能

### 動画聴講画面

> 動画視聴時の専用画面
>
> - 動画プレイヤー
> - 理解度送信機能
> - 動画時間軸と理解度の同期表示

### ディスカッション画面

> 議論参加時の専用画面
>
> - 発言者表示
> - 発言内容に対する理解度送信
> - 議論の流れと理解度の時系列表示

> 注: 詳細なUIコンポーネントの配置は、`src/assets/designs/`ディレクトリに保管される設計ファイルを参照してください。

## 技術仕様

### フロントエンド

- React + TypeScript
  > 型安全性を確保しながら、コンポーネントベースの開発による保守性の高いUI実装を実現
- WebSocket通信
  > リアルタイムな理解度の更新や質問の送受信を実現するため、双方向通信が可能なWebSocketを採用し、低遅延なデータのやり取りを実現
- レスポンシブデザイン
  > Tailwind CSSを活用したレスポンシブデザインにより、デスクトップからモバイルまで、様々なデバイスで最適なユーザー体験を提供

### バックエンド

- 考え中

### インフラ

- 考え中

## 非機能要件

### パフォーマンス

- ページロード時間: 2秒以内
  > ユーザー体験を最適化するため、初期表示から操作可能までの時間を2秒以内に制限
- API応答時間: 200ms以内
  > スムーズな操作感を実現するため、APIリクエストの応答時間を200ms以内に制限
- WebSocket遅延: 100ms以内
  > リアルタイム性を確保するため、WebSocket通信の遅延を100ms以内に制限

### セキュリティ

- ブラウザベースの表示名設定
  > 2ちゃんねるの書き込みユーザーと同様に、ブラウザごとに任意の表示名を設定可能
- セッション管理
  > セッションIDによる一時的な識別のみを実装

### スケーラビリティ

- 同時接続数: 100以上
  > 大規模な講義やイベントにも対応できるよう、100以上の同時接続をサポート
- データベース: 水平スケーリング
  > データ量の増加に柔軟に対応できるよう、水平スケーリング可能なデータベース設計を採用
- キャッシュ: Redisクラスター
  > 高負荷時のパフォーマンスを維持するため、Redisクラスターによる分散キャッシュを実装

### 可用性

- 稼働率: 99.9%
  > 個人利用のアプリケーションのため仮で設定
- バックアップ: 日次
  > 個人利用のアプリケーションのため仮で設定
- 障害復旧: 14日以内
  > 個人利用のアプリケーションのため仮で設定

## 制約条件

### 技術的制約

- モダンブラウザ対応
- モバイル対応
- オフライン対応
  > 突発的なディスカッションの開始時などにも手軽に使用、対応できる

### 運用制約

- メンテナンス: 必要に応じて実施
- バックアップ: 日次
- ログ保持: 30日

### 法的制約

- 著作権対応
  > 録画・配信コンテンツの著作権に配慮した実装
