# 📋 R-Stream 要件定義書

## このファイルの役割

このファイルは、R-Streamプロジェクトの要件定義書として機能します。
プロジェクトの目的、機能要件、非機能要件、制約条件などを明確に定義し、
開発チームやステークホルダーが共通の理解を持つための重要なドキュメントです。

## 📋 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [基本機能要件](#基本機能要件)
3. [画面レイアウト](#画面レイアウト)
4. [技術仕様](#技術仕様)
5. [非機能要件](#非機能要件)
6. [制約条件](#制約条件)
7. [更新履歴](#更新履歴)

## プロジェクト概要

### 目的

R-Streamは、プレゼンテーションや講義、複数人でのディスカッションなどのシチュエーションにおいて、
聴衆の理解度をリアルタイムで可視化し、スピーカーとリスナーの双方向コミュニケーションを促進するための
Webアプリケーションです。

### 主な特徴

- リアルタイム理解度表示
  > 時間軸に対する5段階での理解度グラフをリアルタイム作成、表示する
  > プレゼンター/講師/議論の発言者がリアルタイムで確認、その場でフィードバックできる
- セッション録画
  > プレゼンテーション画面と理解度グラフを同時に録画
  > プレゼンターが後から見返して次回以降のプレゼン力向上に活かせる
- データ分析機能
  > 現状は理解度グラフのみだが、機能拡張した場合は分析機能の有用性の向上が見込まれる

### 対象ユーザー

- プレゼンター/講師/議論の発言者
- 聴衆/学生/議論の参加者
- セッション管理者

### 想定ユースケース

#### プレゼンター

> 社内プレゼンを不特定多数の聴衆に聞かせる際に、本アプリを使用する

#### 講師

> 塾講師が不特定多数の生徒に講義を聞かせる際に、本アプリを使用する

#### 議論の発言者

> 会議などのディスカッションの場において、以下の2つのユースケースを想定：
>
> 1. ファシリテータがグラフをチェックし、司会進行に活かす
> 2. 全員がグラフを共有し、それぞれの発言に対する理解度グラフをリアルタイム確認し、
>    理解/不理解の確認の手間を省くことでディスカッション効率を向上させる

## 基本機能要件

### 1. セッション管理

- セッションの作成と管理
- 参加者管理
- セッション設定のカスタマイズ
  > 匿名モードの有効/無効、理解度グラフの共有設定など、セッションごとの表示設定をカスタマイズ可能

### 2. 理解度表示

- リアルタイム理解度の可視化
- 5段階評価システム
- キーボードショートカット対応

### 4. 録画機能

- 画面録画
  > プレゼンテーション画面と理解度グラフを同時に録画
- 音声録音
  > スピーカーやリスナーの音声を録音
- 自動保存とアーカイブ
  > セッション終了時に自動保存、過去のセッションは30日間アーカイブ

### 5. データ分析

- 理解度の時系列分析
  > セッション中の理解度の推移をグラフ化、重要なポイントを自動検出
- レポート生成
  > セッション終了時に自動で理解度の推移の分析結果レポートを生成

## 画面レイアウト

> 注: 詳細なUIコンポーネントの配置は、`src/assets/designs/wireframes`ディレクトリに保管されるワイヤーフレームを参照してください。

### スピーカー画面

1. ヘッダー

   - セッション情報
     > セッション名、開始時間、参加者数、現在の理解度の平均値
   - 録画コントロール
   - 設定メニュー

2. メインエリア

   - 理解度グラフ
   - 参加者リスト

3. フッター
   - ステータス表示
   - クイックアクション
   - ヘルプ

### リスナー画面

1. ヘッダー

   - セッション情報
     > セッション名、開始時間、残り時間
   - 表示名設定
   - 設定メニュー

2. メインエリア

   - 理解度表示
     > セッション設定に応じて、個人の理解度のみ表示、または全体の理解度グラフも表示

3. フッター
   - ステータス表示
   - クイックアクション
   - ヘルプ

## 技術仕様

### フロントエンド

- React + TypeScript
  > 型安全性を確保しながら、コンポーネントベースの開発による保守性の高いUI実装を実現
- WebSocket通信
  > リアルタイムな理解度の更新や質問の送受信を実現するため、双方向通信が可能なWebSocketを採用し、低遅延なデータのやり取りを実現
- レスポンシブデザイン
  > Tailwind CSSを活用したレスポンシブデザインにより、デスクトップからモバイルまで、様々なデバイスで最適なユーザー体験を提供

### バックエンド

- Node.js + Express
  > 非同期処理に優れたNode.jsと、軽量で拡張性の高いExpressフレームワークを採用し、効率的なAPI実装を実現
- PostgreSQL
  > トランザクション処理と複雑なクエリに強みを持つPostgreSQLを採用し、データの整合性と検索性能を確保
- Redis
  > インメモリデータストアとしてRedisを活用し、セッション管理やキャッシュによる高速なデータアクセスを実現

### インフラ

- AWS S3（ストレージ）
  > 高可用性と耐久性を備えたS3を採用し、録画データやユーザーコンテンツの安全な保存を実現
- AWS CloudFront（CDN）
  > グローバルなエッジロケーションを活用し、コンテンツ配信の高速化と負荷分散を実現
- AWS Route 53（DNS）
  > 高可用性と低レイテンシーを備えたDNSサービスにより、安定したドメイン解決を実現

## 非機能要件

### パフォーマンス

- ページロード時間: 2秒以内
  > ユーザー体験を最適化するため、初期表示から操作可能までの時間を2秒以内に制限
- API応答時間: 200ms以内
  > スムーズな操作感を実現するため、APIリクエストの応答時間を200ms以内に制限
- WebSocket遅延: 100ms以内
  > リアルタイム性を確保するため、WebSocket通信の遅延を100ms以内に制限

### セキュリティ

- ブラウザベースの表示名設定
  > 2ちゃんねるの書き込みユーザーと同様に、ブラウザごとに任意の表示名を設定可能
- セッション管理
  > セッションIDによる一時的な識別のみを実装

### スケーラビリティ

- 同時接続数: 100以上
  > 大規模な講義やイベントにも対応できるよう、100以上の同時接続をサポート
- データベース: 水平スケーリング
  > データ量の増加に柔軟に対応できるよう、水平スケーリング可能なデータベース設計を採用
- キャッシュ: Redisクラスター
  > 高負荷時のパフォーマンスを維持するため、Redisクラスターによる分散キャッシュを実装

### 可用性

- 稼働率: 99.9%
  > 個人利用のアプリケーションのため仮で設定
- バックアップ: 日次
  > 個人利用のアプリケーションのため仮で設定
- 障害復旧: 14日以内
  > 個人利用のアプリケーションのため仮で設定

## 制約条件

### 技術的制約

- モダンブラウザ対応
- モバイル対応
- オフライン対応
  > 突発的なディスカッションの開始時などにも手軽に使用、対応できる

### 運用制約

- メンテナンス: 必要に応じて実施
- バックアップ: 日次
- ログ保持: 30日

### 法的制約

- 著作権対応
  > 録画・配信コンテンツの著作権に配慮した実装

## 🔄 更新履歴

| 日付       | 更新内容 | 更新者 |
| ---------- | -------- | ------ |
| 2025-06-01 | 初版作成 | -      |
